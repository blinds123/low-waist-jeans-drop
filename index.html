<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5">
<title>Low Waist Jeans - The Y2K Revival Everyone's Obsessed With</title>
<meta name="description" content="Low waist. High confidence. Pure 2000s energy. These viral low-rise wide-leg jeans are selling out fast. Ships worldwide. 30-day returns.">

<!-- TikTok Pixel Code -->
<script>
!function (w, d, t) {
  w.TiktokAnalyticsObject=t;var ttq=w[t]=w[t]||[];ttq.methods=["page","track","identify","instances","debug","on","off","once","ready","alias","group","enableCookie","disableCookie"],ttq.setAndDefer=function(t,e){t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}};for(var i=0;i<ttq.methods.length;i++)ttq.setAndDefer(ttq,ttq.methods[i]);ttq.instance=function(t){for(var e=ttq._i[t]||[],n=0;n<ttq.methods.length;n++)ttq.setAndDefer(e,ttq.methods[n]);return e},ttq.load=function(e,n){var i="https://analytics.tiktok.com/i18n/pixel/events.js";ttq._i=ttq._i||{},ttq._i[e]=[],ttq._i[e]._u=i,ttq._t=ttq._t||{},ttq._t[e]=+new Date,ttq._o=ttq._o||{},ttq._o[e]=n||{};var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=i+"?sdkid="+e+"&lib="+t;var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(o,a)};
  ttq.load('D3CVHNBC77U2RE92M7O0');
  ttq.page();
  ttq.track('ViewContent', {
    content_id: 'low-waist-jeans',
    content_type: 'product',
    content_name: 'Low Waist Jeans',
    price: 59,
    currency: 'USD',
    value: 59
  });
}(window, document, 'ttq');
</script>
<!-- End TikTok Pixel Code -->

<!-- Performance Meta -->
<meta name="theme-color" content="#5B8FA3">
<meta name="color-scheme" content="light">

<!-- Critical Resource Hints -->
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link rel="dns-prefetch" href="//analytics.google.com">

<!-- Preload Critical Hero Image -->
<link rel="preload" as="image" href="./images/product/product-01.jpeg" type="image/jpeg" fetchpriority="high">

<!-- Design System CSS from Agent 1E -->
<style>
:root {
  --brand-primary: #5B8FA3;
  --brand-secondary: #E8DCC4;
  --brand-accent: #D97757;
  --brand-light: #FAF8F5;
  --brand-dark: #2C3E50;
  --color-success: #6BB99D;
  --color-warning: #F4A261;
  --color-error: #E76F51;
  --font-display: 'DM Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
  --font-body: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', sans-serif;
  --text-xs: 0.75rem;
  --text-sm: 0.875rem;
  --text-base: 1rem;
  --text-lg: 1.125rem;
  --text-xl: 1.25rem;
  --text-2xl: 1.5rem;
  --text-3xl: 2rem;
  --text-4xl: 2.5rem;
  --space-xs: 4px;
  --space-sm: 8px;
  --space-md: 16px;
  --space-lg: 24px;
  --space-xl: 40px;
  --radius-sm: 4px;
  --radius-md: 8px;
  --radius-lg: 16px;
  --radius-xl: 24px;
  --shadow-sm: 0 1px 2px rgba(44, 62, 80, 0.05);
  --shadow-md: 0 4px 6px rgba(44, 62, 80, 0.07);
  --shadow-lg: 0 10px 15px rgba(44, 62, 80, 0.1);
  --transition-fast: 150ms ease-in-out;
  --transition-base: 250ms ease-in-out;
}

*{margin:0;padding:0;box-sizing:border-box;-webkit-tap-highlight-color:transparent}
body{font-family:var(--font-body);color:var(--brand-dark);line-height:1.6;background:var(--brand-light);-webkit-font-smoothing:antialiased;overflow-x:hidden}

.main-content{display:block}
.announcement{background:var(--brand-primary);color:#fff;text-align:center;padding:12px;font-size:14px;font-weight:500;position:relative;z-index:10}
.container{max-width:1200px;margin:0 auto;padding:0 20px;position:relative}
.product-hero{display:grid;grid-template-columns:1fr 1fr;gap:60px;padding:40px 20px;align-items:start;min-height:500px}
.gallery{position:sticky;top:20px;z-index:1}
.main-img{width:100%;height:auto;border-radius:var(--radius-lg);aspect-ratio:3/4;object-fit:cover;background:#f8f8f8;will-change:transform;transition:opacity 0.3s ease}
.product-info{position:relative;z-index:2}
.product-info h1{font-family:var(--font-display);font-size:clamp(28px,5vw,40px);font-weight:700;margin-bottom:10px;line-height:1.2;letter-spacing:-0.02em;color:var(--brand-dark)}
.tagline{color:#666;font-size:clamp(16px,3vw,18px);margin-bottom:20px;font-weight:400}
.price-box{display:flex;align-items:baseline;gap:15px;margin-bottom:30px;flex-wrap:wrap}
.price{font-size:clamp(28px,6vw,36px);font-weight:700;color:var(--brand-dark);letter-spacing:-0.02em}
.old-price{font-size:clamp(20px,4vw,24px);color:#999;text-decoration:line-through}
.badge{background:var(--brand-accent);color:#fff;padding:4px 12px;border-radius:20px;font-size:14px;font-weight:600;white-space:nowrap}
.cta-btn{width:100%;padding:18px;font-size:18px;font-weight:700;border-radius:var(--radius-md);border:none;cursor:pointer;margin-bottom:15px;transition:all var(--transition-fast);transform:translateZ(0);will-change:transform;position:relative;overflow:hidden;min-height:56px}
.cta-btn::before{content:'';position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,0.2),transparent);transition:left 0.5s;z-index:1}
.cta-btn:hover::before{left:100%}
.cta-primary{background:var(--brand-primary);color:#fff;box-shadow:0 2px 8px rgba(91,143,163,0.3)}
.cta-primary:hover{transform:translateY(-2px);box-shadow:0 4px 16px rgba(91,143,163,0.4)}
.cta-primary:active{transform:translateY(0) scale(0.98)}
.btn-subtitle{font-size:12px;font-weight:400;opacity:0.9;margin-top:4px;position:relative;z-index:2}
.fade-in{opacity:0;transform:translateY(20px);transition:opacity 0.6s ease,transform 0.6s ease}
.fade-in.visible{opacity:1;transform:translateY(0)}

/* Testimonial Styles */
.testimonial-card{background:#fff;border-radius:var(--radius-lg);padding:24px;box-shadow:var(--shadow-md);border:1px solid rgba(0,0,0,0.05)}
.testimonial-header{display:flex;align-items:center;gap:12px;margin-bottom:16px}
.testimonial-avatar{width:48px;height:48px;border-radius:50%;object-fit:cover}
.testimonial-info{flex:1}
.testimonial-name{font-weight:600;font-size:14px;margin-bottom:2px}
.testimonial-platform{display:flex;align-items:center;gap:6px;color:#666;font-size:12px}
.testimonial-platform svg{width:14px;height:14px}
.testimonial-stars{color:#ffc107;font-size:14px;letter-spacing:2px}
.testimonial-text{font-size:15px;line-height:1.6;color:#333}
.testimonial-date{color:#999;font-size:12px;margin-top:12px}

/* Size Selector */
.size-btn{padding:14px 12px;border:2px solid #e0e0e0;background:#fff;border-radius:var(--radius-md);cursor:pointer;font-weight:600;transition:all 0.2s;font-size:14px;min-width:44px;min-height:44px}
.size-btn:not(:disabled):hover{border-color:var(--brand-primary);transform:scale(1.05)}
.size-btn.selected{background:var(--brand-primary);color:#fff;border-color:var(--brand-primary)}
.size-btn:disabled{opacity:0.4;cursor:not-allowed}

/* Accordion Styles */
.accordion{border:1px solid #e0e0e0;border-radius:var(--radius-lg);overflow:hidden;margin-bottom:12px;background:#fff}
.accordion-header{display:flex;align-items:center;justify-content:space-between;padding:20px;cursor:pointer;transition:background 0.2s}
.accordion-header:hover{background:var(--brand-light)}
.accordion-title{display:flex;align-items:center;gap:12px;font-weight:600;font-size:16px}
.accordion-title svg{width:20px;height:20px;color:var(--brand-primary)}
.accordion-icon{transition:transform 0.3s;font-size:20px;color:#666}
.accordion.open .accordion-icon{transform:rotate(180deg)}
.accordion-content{max-height:0;overflow:hidden;transition:max-height 0.3s ease-out}
.accordion.open .accordion-content{max-height:1000px}
.accordion-body{padding:0 20px 20px;color:#555;line-height:1.7}
.accordion-body h3{color:var(--brand-dark);margin-bottom:12px;font-size:18px}
.accordion-body ul{list-style:none;padding:0}
.accordion-body li{margin:8px 0;padding-left:20px;position:relative}
.accordion-body li::before{content:'';position:absolute;left:0;top:8px;width:6px;height:6px;background:var(--brand-primary);border-radius:50%}
.accordion-body table{width:100%;border-collapse:collapse;margin:16px 0}
.accordion-body th,.accordion-body td{padding:10px;border:1px solid #e0e0e0;text-align:center}
.accordion-body th{background:var(--brand-light);font-weight:600}

/* Mobile Responsive */
@media(max-width:768px){
.product-hero{grid-template-columns:1fr;gap:30px;padding:20px 16px}
.gallery{position:static}
.container{padding:0 16px}
.cta-btn{font-size:16px;padding:16px;min-height:56px}
}

@keyframes fadeIn{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}
@keyframes pulse{0%,100%{box-shadow:0 0 0 0 rgba(91,143,163,0.4)}50%{box-shadow:0 0 0 10px rgba(91,143,163,0)}}
</style>

<!-- Prefetch Additional Images -->
<link rel="prefetch" as="image" href="./images/product/product-02.jpeg">
<link rel="prefetch" as="image" href="./images/product/product-03.jpeg">
</head>

<body>

<!-- Order Bump Popup -->
<div id="orderBumpPopup" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,0.8);z-index:10000;align-items:center;justify-content:center;padding:20px">
  <div style="background:#fff;border-radius:var(--radius-xl);max-width:600px;width:100%;padding:40px;position:relative;box-shadow:0 20px 60px rgba(0,0,0,0.3);animation:fadeIn 0.3s ease">
    <button onclick="closeOrderBumpPopup()" style="position:absolute;top:20px;right:20px;background:none;border:none;font-size:28px;cursor:pointer;color:#999;line-height:1;padding:0;width:44px;height:44px">&times;</button>
    <div style="text-align:center;margin-bottom:30px">
      <div style="background:var(--brand-primary);color:#fff;display:inline-block;padding:8px 16px;border-radius:20px;font-size:14px;font-weight:700;margin-bottom:20px">COMPLETE THE LOOK!</div>
      <h2 style="font-size:28px;font-weight:700;margin-bottom:12px;color:var(--brand-dark)">Add the Matching Y2K Crop Top?</h2>
      <p style="color:#666;font-size:16px">The perfect pair for your new jeans</p>
    </div>
    <div style="background:var(--brand-light);border-radius:var(--radius-lg);padding:24px;margin-bottom:30px">
      <div style="display:flex;gap:20px;align-items:center">
        <div style="flex:1">
          <h3 style="font-size:20px;font-weight:700;margin-bottom:8px">Y2K Baby Crop Top</h3>
          <ul style="list-style:none;padding:0;margin:0">
            <li style="margin:6px 0;color:#555;font-size:14px">Matching vintage aesthetic</li>
            <li style="margin:6px 0;color:#555;font-size:14px">Perfect low-rise pairing</li>
            <li style="margin:6px 0;color:#555;font-size:14px">Soft stretch cotton</li>
            <li style="margin:6px 0;color:#555;font-size:14px">TikTok approved combo</li>
          </ul>
        </div>
        <div style="text-align:center">
          <div style="font-size:14px;color:#999;text-decoration:line-through">$39</div>
          <div style="font-size:32px;font-weight:700;color:var(--color-success)">$10</div>
          <div style="background:var(--color-success);color:#fff;padding:4px 12px;border-radius:12px;font-size:12px;font-weight:700;margin-top:8px">74% OFF</div>
        </div>
      </div>
    </div>
    <div id="orderSummary" style="background:#fff;border:2px solid #e0e0e0;border-radius:var(--radius-lg);padding:20px;margin-bottom:24px">
      <!-- Dynamic order summary -->
    </div>
    <button onclick="acceptOrderBump()" style="width:100%;background:var(--color-success);color:#fff;border:none;padding:18px;border-radius:var(--radius-lg);font-size:18px;font-weight:700;cursor:pointer;margin-bottom:12px;transition:all 0.2s;min-height:56px">
      YES! Add Crop Top - Only $10
    </button>
    <button onclick="declineOrderBump()" style="width:100%;background:#fff;color:#666;border:2px solid #ddd;padding:14px;border-radius:var(--radius-lg);font-size:14px;font-weight:600;cursor:pointer;transition:all 0.2s;min-height:44px">
      No thanks, just the jeans
    </button>
  </div>
</div>

<!-- Main Content -->
<div class="main-content" id="mainContent">
  <div class="announcement">THE LOW-RISE JEANS TIKTOK CAN'T STOP TALKING ABOUT - NOW RESTOCKED</div>

  <div class="container">
    <div class="product-hero">
      <div class="gallery">
        <img class="main-img fade-in visible" id="heroImage" src="./images/product/product-01.jpeg" alt="Low Waist Jeans - Y2K Wide Leg Denim" width="600" height="800" loading="eager" decoding="async">
        <div id="thumbs" style="display:flex;gap:10px;margin-top:15px;overflow-x:auto"></div>
      </div>

      <div class="product-info">
        <h1 class="fade-in visible">The Low-Rise Jeans TikTok Can't Stop Talking About</h1>
        <p class="tagline fade-in visible">Low waist. High confidence. Pure 2000s energy.</p>

        <div class="price-box fade-in visible">
          <span class="price">$59</span>
          <span class="old-price">$89</span>
          <span class="badge">34% OFF</span>
        </div>
        <div style="color:var(--brand-accent);font-size:14px;font-weight:600;margin-bottom:20px">1,247 pairs sold this week</div>

        <button class="cta-btn cta-primary fade-in visible" id="primaryCTA" onclick="handleAddToCart('primary')">
          GET MINE NOW - $59
          <div class="btn-subtitle">In Stock: Ships Same-Day (Only 23 Left)</div>
        </button>

        <button class="cta-btn fade-in visible" id="secondaryCTA" style="background:#fff;color:var(--brand-primary);border:2px solid var(--brand-primary)" onclick="handleAddToCart('secondary')">
          PRE-ORDER FOR 68% OFF - $19
          <div class="btn-subtitle">Worth the wait: Ships in 2-3 weeks (save $40)</div>
        </button>

        <!-- Guarantee Badge -->
        <div style="background:rgba(107,185,157,0.1);border:2px solid var(--color-success);border-radius:var(--radius-lg);padding:16px;margin-top:20px;text-align:center">
          <div style="font-weight:700;font-size:16px;color:var(--color-success);margin-bottom:4px">30-Day Money-Back Guarantee</div>
          <div style="color:#555;font-size:13px">Don't love them? Return for free. No questions asked.</div>
        </div>

        <div style="display:flex;gap:20px;margin-top:20px;flex-wrap:wrap">
          <div style="display:flex;align-items:center;gap:8px;color:#666;font-size:14px">
            <svg viewBox="0 0 24 24" fill="none" width="16" height="16"><path d="M20.8 6.2c.5.4.5 1.1.1 1.6l-11.2 13c-.2.3-.5.4-.8.4-.3 0-.6-.1-.8-.3L3.3 15.8c-.5-.4-.5-1.2-.1-1.6.4-.5 1.2-.5 1.6-.1l4.3 3.8L19.2 6.3c.4-.5 1.1-.5 1.6-.1z" fill="currentColor"/></svg>
            Free Returns
          </div>
          <div style="display:flex;align-items:center;gap:8px;color:#666;font-size:14px">
            <svg viewBox="0 0 24 24" fill="none" width="16" height="16"><path d="M20.8 6.2c.5.4.5 1.1.1 1.6l-11.2 13c-.2.3-.5.4-.8.4-.3 0-.6-.1-.8-.3L3.3 15.8c-.5-.4-.5-1.2-.1-1.6.4-.5 1.2-.5 1.6-.1l4.3 3.8L19.2 6.3c.4-.5 1.1-.5 1.6-.1z" fill="currentColor"/></svg>
            Fast Shipping
          </div>
          <div style="display:flex;align-items:center;gap:8px;color:#666;font-size:14px">
            <svg viewBox="0 0 24 24" fill="none" width="16" height="16"><path d="M20.8 6.2c.5.4.5 1.1.1 1.6l-11.2 13c-.2.3-.5.4-.8.4-.3 0-.6-.1-.8-.3L3.3 15.8c-.5-.4-.5-1.2-.1-1.6.4-.5 1.2-.5 1.6-.1l4.3 3.8L19.2 6.3c.4-.5 1.1-.5 1.6-.1z" fill="currentColor"/></svg>
            Secure Checkout
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Lazy Content Container -->
  <div id="lazyContent"></div>
</div>

<script>
// Performance Metrics
const perfMetrics = { marks: {}, mark(name) { this.marks[name] = performance.now(); } };
perfMetrics.mark('script-start');

// Initialize on DOM ready
document.addEventListener('DOMContentLoaded', function() {
  loadThumbnails();
  loadRemainingContent();
  perfMetrics.mark('content-loaded');
});

// ESC key to close popup
document.addEventListener('keydown', function(e) {
  if (e.key === 'Escape') {
    const popup = document.getElementById('orderBumpPopup');
    if (popup && popup.style.display === 'flex') {
      closeOrderBumpPopup();
    }
  }
});

// Click outside popup to close
document.getElementById('orderBumpPopup')?.addEventListener('click', function(e) {
  if (e.target === this) {
    closeOrderBumpPopup();
  }
});

// Product Images
const productImages = ['product-01.jpeg', 'product-02.jpeg', 'product-03.jpeg', 'product-04.jpeg', 'product-05.jpeg'];

function loadThumbnails() {
  const thumbsContainer = document.getElementById('thumbs');
  thumbsContainer.innerHTML = '';

  productImages.forEach((src, i) => {
    const thumb = document.createElement('img');
    thumb.src = `./images/product/${src}`;
    thumb.alt = `Low Waist Jeans view ${i + 1}`;
    thumb.loading = 'lazy';
    thumb.style.cssText = `width:80px;height:100px;border-radius:var(--radius-md);cursor:pointer;border:2px solid ${i === 0 ? 'var(--brand-primary)' : 'transparent'};object-fit:cover;transition:all 0.2s`;
    thumb.onclick = () => switchMainImage(src, thumb);
    thumbsContainer.appendChild(thumb);
  });
}

function switchMainImage(src, thumbElement) {
  const heroImg = document.getElementById('heroImage');
  heroImg.src = `./images/product/${src}`;

  document.querySelectorAll('#thumbs img').forEach(t => t.style.borderColor = 'transparent');
  thumbElement.style.borderColor = 'var(--brand-primary)';
}

// Size and Cart Functions
window.selectedSize = null;
window.currentOrderType = null;

function selectSize(button, size) {
  document.querySelectorAll('.size-btn').forEach(btn => {
    btn.classList.remove('selected');
    btn.style.background = '#fff';
    btn.style.color = '#000';
    btn.style.borderColor = '#e0e0e0';
  });

  button.classList.add('selected');
  button.style.background = 'var(--brand-primary)';
  button.style.color = '#fff';
  button.style.borderColor = 'var(--brand-primary)';

  window.selectedSize = size;
}

// SimpleSwap Pool Integration
const SIMPLESWAP_POOL_API = 'https://simpleswap-automation-1.onrender.com';
let requestInFlight = false;

async function getExchangeFromPool(amountUSD) {
  if (requestInFlight) {
    console.log('[POOL] Request already in progress');
    return;
  }
  requestInFlight = true;
  try {
    const btn = document.querySelector('.cta-btn.cta-primary');
    const originalText = btn ? btn.innerHTML : '';
    if (btn) btn.innerHTML = 'Creating your order...<div class="btn-subtitle">Please wait</div>';

    const controller = new AbortController();
    const timeoutId = setTimeout(() => controller.abort(), 15000);

    const response = await fetch(`${SIMPLESWAP_POOL_API}/buy-now`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ amountUSD: amountUSD }),
      signal: controller.signal
    });

    clearTimeout(timeoutId);
    const data = await response.json();

    if (data.success && data.exchangeUrl) {
      window.location.href = data.exchangeUrl;
    } else {
      alert('Unable to create order. Please try again.');
      if (btn) btn.innerHTML = originalText;
    }
  } catch (error) {
    console.error('[POOL] Error:', error);
    alert(error.name === 'AbortError' ? 'Request timeout. Please try again.' : 'Payment error. Please try again.');
    const btn = document.querySelector('.cta-btn.cta-primary');
    if (btn) btn.innerHTML = 'GET MINE NOW - $59<div class="btn-subtitle">In Stock: Ships Same-Day (Only 23 Left)</div>';
  } finally {
    requestInFlight = false;
  }
}

async function processOrder(amountUSD) {
  if (typeof ttq !== 'undefined') {
    ttq.track('Purchase', {
      content_id: 'low-waist-jeans',
      content_type: 'product',
      content_name: 'Low Waist Jeans',
      price: amountUSD,
      quantity: 1,
      currency: 'USD',
      value: amountUSD
    });
  }
  await getExchangeFromPool(amountUSD);
}

function handleAddToCart(type) {
  perfMetrics.mark(`cta-clicked-${type}`);
  window.currentOrderType = type;

  if (!window.selectedSize) {
    const sizeSection = document.querySelector('.size-grid');
    if (sizeSection) {
      sizeSection.scrollIntoView({ behavior: 'smooth', block: 'center' });
      sizeSection.style.animation = 'pulse 1s ease-in-out';
    }
    return;
  }

  showOrderBumpPopup(type);
}

function showOrderBumpPopup(type) {
  const basePrice = type === 'primary' ? 59 : 19;
  const bumpPrice = 10;
  const total = basePrice + bumpPrice;

  document.getElementById('orderSummary').innerHTML = `
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
      <span style="color:#666">${type === 'primary' ? 'Low Waist Jeans' : 'Pre-Order: Low Waist Jeans'}</span>
      <span style="font-weight:600">$${basePrice}</span>
    </div>
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px;padding-bottom:12px;border-bottom:1px solid #e0e0e0">
      <span style="color:var(--color-success);font-weight:600">+ Y2K Crop Top</span>
      <span style="font-weight:600;color:var(--color-success)">$${bumpPrice}</span>
    </div>
    <div style="display:flex;justify-content:space-between;align-items:center">
      <span style="font-size:18px;font-weight:700">Total</span>
      <span style="font-size:24px;font-weight:700;color:var(--brand-dark)">$${total}</span>
    </div>
  `;

  document.getElementById('orderBumpPopup').style.display = 'flex';
  document.body.style.overflow = 'hidden';
}

function closeOrderBumpPopup() {
  document.getElementById('orderBumpPopup').style.display = 'none';
  document.body.style.overflow = 'auto';
}

function acceptOrderBump() {
  closeOrderBumpPopup();
  const amount = window.currentOrderType === 'primary' ? 59 : 29;
  processOrder(amount);
}

function declineOrderBump() {
  closeOrderBumpPopup();
  const amount = window.currentOrderType === 'primary' ? 59 : 19;
  processOrder(amount);
}

// SVG Platform Icons
const platformSVGs = {
  tiktok: `<svg viewBox="0 0 24 24" fill="currentColor"><path d="M19.59 6.69a4.83 4.83 0 01-3.77-4.25V2h-3.45v13.67a2.89 2.89 0 01-5.2 1.74 2.89 2.89 0 012.31-4.64 2.93 2.93 0 01.88.13V9.4a6.84 6.84 0 00-1-.05A6.33 6.33 0 005 20.1a6.34 6.34 0 0010.86-4.43v-7a8.16 8.16 0 004.77 1.52v-3.4a4.85 4.85 0 01-1-.1z"/></svg>`,
  instagram: `<svg viewBox="0 0 24 24" fill="currentColor"><path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zM12 0C8.741 0 8.333.014 7.053.072 2.695.272.273 2.69.073 7.052.014 8.333 0 8.741 0 12c0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98C8.333 23.986 8.741 24 12 24c3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98C15.668.014 15.259 0 12 0zm0 5.838a6.162 6.162 0 100 12.324 6.162 6.162 0 000-12.324zM12 16a4 4 0 110-8 4 4 0 010 8zm6.406-11.845a1.44 1.44 0 100 2.881 1.44 1.44 0 000-2.881z"/></svg>`,
  facebook: `<svg viewBox="0 0 24 24" fill="#1877F2"><path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/></svg>`,
  trustpilot: `<svg viewBox="0 0 24 24" fill="#00b67a"><path d="M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"/></svg>`,
  google: `<svg viewBox="0 0 24 24"><path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg>`
};

const platformColors = {
  tiktok: '#000000',
  instagram: '#E4405F',
  facebook: '#1877F2',
  trustpilot: '#00b67a',
  google: '#4285F4'
};

// Testimonials from Agent 1B
const testimonials = [
  { name: "Emma R.", platform: "tiktok", rating: 5, text: "omg these jeans are literaly everything!! got so many compliments at school and they make my legs look miles long. definitley worth the hype dont sleep on these", date: "2 days ago", img: 1 },
  { name: "Madison L.", platform: "tiktok", rating: 5, text: "ive been searching for the perfect low rise jeans foreverrr and these are IT. so comfy and the wide leg is chefs kiss. already ordered in another color lol", date: "5 days ago", img: 2 },
  { name: "Chloe M.", platform: "tiktok", rating: 4, text: "really cute jeans! fit is amazing but i wish they came in more washes. still obsessed tho and get compliments every time i wear them", date: "1 week ago", img: 3 },
  { name: "Ava S.", platform: "tiktok", rating: 5, text: "bestttt purchase ever!! these make my outfit every single time. saw them on tiktok and had to try and im so glad i did. 100% recomend", date: "3 days ago", img: 4 },
  { name: "Sophia D.", platform: "tiktok", rating: 5, text: "yall these jeans are the real deal. i was skeptical bc of all the hype but theyre actually perfect?? the fit is insane and they dont stretch out after wearing", date: "6 days ago", img: 5 },
  { name: "Olivia K.", platform: "tiktok", rating: 4, text: "super cute and comfy! only thing is they ran a tiny bit long on me (im 5'4) but nothing crazy. still love them and wear them constantly", date: "4 days ago", img: 6 },
  { name: "Isabella T.", platform: "tiktok", rating: 5, text: "obsesseddd is an understatement. these jeans are my new personality trait lmao. got the blue wash and alredy planning to get the black ones too", date: "1 week ago", img: 7 },
  { name: "Mia B.", platform: "tiktok", rating: 5, text: "okay so i dont usually write reviews but these jeans deserve it!! so flattering and the quality is way better than i expected for the price. 10/10", date: "3 days ago", img: 8 },
  { name: "Lily H.", platform: "tiktok", rating: 3, text: "theyre cute but i think i ordered the wrong size. might exchagne for a smaller one bc they feel a bit loose. still really nice quality tho", date: "2 weeks ago", img: 9 },
  { name: "Ella W.", platform: "tiktok", rating: 5, text: "if ur thinking about getting these just DO IT. trust me you wont regret it. most comfortable jeans ive ever owned and they look so expensive", date: "5 days ago", img: 10 },
  { name: "Grace P.", platform: "tiktok", rating: 5, text: "im obsessed with how these fit!! the low waist is perfect not too low and the wide leg is so flatering. definitly my new go-to jeans", date: "1 week ago", img: 11 },
  { name: "Zoe C.", platform: "tiktok", rating: 5, text: "these jeans are actually life changing. wore them to a party last weekend and got asked where i got them like 5 times no joke. ordering more asap", date: "4 days ago", img: 12 },
  { name: "Riley M.", platform: "instagram", rating: 5, text: "Finally found the perfect low-rise jeans! These are everything I wanted and more. The fit is incredible and they photograph so well. Already planning my next order!", date: "3 days ago", img: 13 },
  { name: "Harper J.", platform: "instagram", rating: 5, text: "Obsessed with these jeans!! The quality is amazing and they're so comfy. Got tons of compliments when I posted them. Definetly recommend if you want that y2k vibe", date: "1 week ago", img: 14 },
  { name: "Aria N.", platform: "instagram", rating: 4, text: "Love the style and fit of these! They look exactly like the photos which is rare these days. Only minor thing is they wrinkle easily but thats not a dealbreaker for me", date: "5 days ago", img: 15 },
  { name: "Scarlett V.", platform: "instagram", rating: 5, text: "These jeans are a total vibe! Been wearing them nonstop since they arrived. The wide leg is so flattering and the low rise sits perfectly. Worth every penny", date: "2 days ago", img: 16 },
  { name: "Luna G.", platform: "instagram", rating: 5, text: "10/10 jeans right here! Super comfortable and they dont lose their shape after washing. The denim quality is really good and they style so easily with everything", date: "6 days ago", img: 17 },
  { name: "Hazel F.", platform: "instagram", rating: 4, text: "Really cute jeans! Fit is great and they're super comfy. Took off one star bc shipping took a bit longer than expected but the product itself is amazing", date: "1 week ago", img: 18 },
  { name: "Aurora L.", platform: "instagram", rating: 5, text: "Best jeans purchase Ive made in forever! The fit is absolutley perfect and they make my legs look so long. Already recommended to all my friends", date: "4 days ago", img: 19 },
  { name: "Willow R.", platform: "instagram", rating: 3, text: "They're nice jeans but i think I prefered a different style on me. The quality is defintely there tho and they fit true to size. Might try a different wash", date: "2 weeks ago", img: 20 },
  { name: "Jessica T.", platform: "facebook", rating: 5, text: "My daughter absolutely loves these jeans! She wears them constantly and says theyre the most comfortable jeans she owns. Great quality for the price. Highly recomend!", date: "1 week ago", img: 21 },
  { name: "Rachel M.", platform: "facebook", rating: 5, text: "Bought these for my niece's birthday and she was thrilled! She says they fit perfectly and loves the style. Will definitly be ordering more as gifts. Excellant product!", date: "5 days ago", img: 1 },
  { name: "Amanda K.", platform: "facebook", rating: 4, text: "Really nice jeans! Good quality denim and the fit seems great. My daughter is very happy with them. Only wish was that there were more color options availble", date: "3 days ago", img: 2 },
  { name: "Jennifer L.", platform: "facebook", rating: 5, text: "These jeans are fantastic! Bought them for myself and ended up ordering pairs for both my daughters too. The quality is excelent and they wash really well. Great purchase!", date: "2 weeks ago", img: 3 },
  { name: "Sarah Mitchell", platform: "trustpilot", rating: 5, text: "Excellent product quality and customer service. The jeans arrived quickly and were exactly as described. The fit is perfect and the denim feels premium. Very satisfied with this purchase.", date: "1 week ago", img: 4 },
  { name: "Emily Carter", platform: "trustpilot", rating: 4, text: "Very happy with these jeans overall. The quality is great and they fit true to size. Shipping was prompt and packaging was secure. Would have given 5 stars if there were more wash options available.", date: "6 days ago", img: 5 },
  { name: "Lauren Davis", platform: "trustpilot", rating: 5, text: "Outstanding quality and perfect fit. These jeans exceeded my expectations. The wide-leg cut is flattering and the low-rise sits comfortably. Will definitely purchase from this brand again.", date: "4 days ago", img: 6 },
  { name: "Brittany Wilson", platform: "google", rating: 5, text: "Great jeans! The quality is excellent and they fit perfectly. Very comfortable to wear all day. The ordering process was easy and delivery was fast. Highly recommend.", date: "5 days ago", img: 7 },
  { name: "Samantha Brown", platform: "google", rating: 4, text: "Really nice pair of jeans. Good quality denim and true to size. The style is exactly what I was looking for. Delivery took a few days longer than expected but overall very satisfied.", date: "1 week ago", img: 8 },
  { name: "Nicole Anderson", platform: "google", rating: 5, text: "Perfect jeans! Exactly as pictured and described. The fit is flattering and comfortable. Fast shipping and excellent customer service. Would definitely buy again.", date: "3 days ago", img: 9 }
];

// Load Remaining Content
function loadRemainingContent() {
  const lazyContent = document.getElementById('lazyContent');

  lazyContent.innerHTML = `
    <!-- Size Selector -->
    <div class="fade-in" style="padding:40px 20px;border-top:1px solid #f0f0f0;max-width:1200px;margin:0 auto">
      <h3 style="margin-bottom:20px;font-weight:600;font-size:18px">Select Your Size:</h3>
      <div class="size-grid" style="display:grid;grid-template-columns:repeat(auto-fill,minmax(70px,1fr));gap:12px;margin-bottom:30px">
        ${[{s:'XS',a:true},{s:'S',a:true},{s:'M',a:true},{s:'L',a:true},{s:'XL',a:true}].map(size =>
          `<button class="size-btn" data-size="${size.s}" ${!size.a ? 'disabled' : ''} onclick="selectSize(this, '${size.s}')">${size.s}${!size.a ? '<span style="display:block;font-size:10px;color:var(--brand-accent);margin-top:2px">Sold Out</span>' : ''}</button>`
        ).join('')}
      </div>
      <div style="background:var(--brand-light);border-left:3px solid var(--brand-primary);padding:20px;border-radius:var(--radius-md)">
        <strong style="color:var(--brand-primary)">Free Returns + Fast Shipping</strong><br>
        <span style="color:#666;font-size:14px">Not satisfied? Return within 30 days for a full refund.</span>
      </div>
    </div>

    <!-- Product Accordion -->
    <div class="fade-in" style="padding:40px 20px;max-width:1200px;margin:0 auto">
      <h2 style="font-size:24px;font-weight:700;margin-bottom:24px">Product Details</h2>

      <div class="accordion" onclick="toggleAccordion(this)">
        <div class="accordion-header">
          <div class="accordion-title">
            <svg viewBox="0 0 24 24" fill="none"><path d="M20.8 6.2c.5.4.5 1.1.1 1.6l-11.2 13c-.2.3-.5.4-.8.4-.3 0-.6-.1-.8-.3L3.3 15.8c-.5-.4-.5-1.2-.1-1.6.4-.5 1.2-.5 1.6-.1l4.3 3.8L19.2 6.3c.4-.5 1.1-.5 1.6-.1z" fill="currentColor"/></svg>
            Description
          </div>
          <span class="accordion-icon">&#9660;</span>
        </div>
        <div class="accordion-content">
          <div class="accordion-body">
            <h3>The Low-Rise Revival You've Been Waiting For</h3>
            <p>Step into Y2K nostalgia with our signature Low Waist Wide Leg Jeans. Designed for the modern Gen-Z aesthetic, these jeans combine the iconic low-rise fit of the early 2000s with a contemporary wide-leg silhouette that's taking over TikTok.</p>
            <ul>
              <li><strong>Low-Rise Fit:</strong> Sits perfectly on your hips for that authentic Y2K vibe</li>
              <li><strong>Wide Leg Cut:</strong> Flattering silhouette that elongates your frame</li>
              <li><strong>Premium Denim:</strong> 98% cotton, 2% elastane for the perfect stretch</li>
              <li><strong>Vintage Wash:</strong> Medium-blue stonewash with subtle distressing</li>
              <li><strong>5-Pocket Design:</strong> Classic jean styling with functional pockets</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="accordion" onclick="toggleAccordion(this)">
        <div class="accordion-header">
          <div class="accordion-title">
            <svg viewBox="0 0 24 24" fill="none"><path d="M4.2 4.8c0-.4.3-.7.7-.7h4.2c.4 0 .7.3.7.7v4.3c0 .4-.3.7-.7.7H4.9c-.4 0-.7-.3-.7-.7V4.8zm0 9.5c0-.4.3-.7.7-.7h4.2c.4 0 .7.3.7.7v4.3c0 .4-.3.7-.7.7H4.9c-.4 0-.7-.3-.7-.7v-4.3zm9.6-9.5c0-.4.3-.7.7-.7h4.2c.4 0 .7.3.7.7v4.3c0 .4-.3.7-.7.7h-4.2c-.4 0-.7-.3-.7-.7V4.8zm0 9.5c0-.4.3-.7.7-.7h4.2c.4 0 .7.3.7.7v4.3c0 .4-.3.7-.7.7h-4.2c-.4 0-.7-.3-.7-.7v-4.3z" fill="currentColor"/></svg>
            Size Guide
          </div>
          <span class="accordion-icon">&#9660;</span>
        </div>
        <div class="accordion-content">
          <div class="accordion-body">
            <h3>Find Your Perfect Fit</h3>
            <p><strong>Model is 5'7" and wearing size S</strong></p>
            <table>
              <thead><tr><th>Size</th><th>Waist</th><th>Hip</th><th>Inseam</th></tr></thead>
              <tbody>
                <tr><td>XS</td><td>23-24"</td><td>33-34"</td><td>32"</td></tr>
                <tr><td>S</td><td>25-26"</td><td>35-36"</td><td>32"</td></tr>
                <tr><td>M</td><td>27-28"</td><td>37-38"</td><td>32"</td></tr>
                <tr><td>L</td><td>29-30"</td><td>39-40"</td><td>32"</td></tr>
                <tr><td>XL</td><td>31-32"</td><td>41-42"</td><td>32"</td></tr>
              </tbody>
            </table>
            <p><strong>Tip:</strong> Low-rise style sits 2-3 inches below natural waist. Size down if between sizes.</p>
          </div>
        </div>
      </div>

      <div class="accordion" onclick="toggleAccordion(this)">
        <div class="accordion-header">
          <div class="accordion-title">
            <svg viewBox="0 0 24 24" fill="none"><path d="M3.2 6.8c0-.5.3-.8.7-.8h10.3c.4 0 .7.3.7.8v7.4H3.2V6.8zm11.7 9.8c0 1.3-1.1 2.4-2.4 2.4-1.3 0-2.4-1.1-2.4-2.4h-5c0 1.3-1.1 2.4-2.4 2.4C1.4 19 .3 17.9.3 16.6v-9c0-1.5 1.2-2.7 2.7-2.7h10.3c1.5 0 2.7 1.2 2.7 2.7v1.2h2.8c.3 0 .5.1.7.3l2.9 3.4c.1.2.2.4.2.6v3.1c0 1.3-1.1 2.4-2.4 2.4-1.3 0-2.4-1.1-2.4-2.4h-1.9z" fill="currentColor"/></svg>
            Shipping
          </div>
          <span class="accordion-icon">&#9660;</span>
        </div>
        <div class="accordion-content">
          <div class="accordion-body">
            <h3>Fast & Free Shipping</h3>
            <p><strong>FREE Standard Shipping on all orders over $75</strong></p>
            <ul>
              <li><strong>Processing Time:</strong> 1-2 business days</li>
              <li><strong>Standard Shipping:</strong> 5-7 business days ($5.99 under $75)</li>
              <li><strong>Express Shipping:</strong> 2-3 business days ($14.99)</li>
              <li><strong>Overnight:</strong> Next business day ($24.99)</li>
            </ul>
            <p>Orders placed before 2 PM EST ship same day!</p>
          </div>
        </div>
      </div>

      <div class="accordion" onclick="toggleAccordion(this)">
        <div class="accordion-header">
          <div class="accordion-title">
            <svg viewBox="0 0 24 24" fill="none"><path d="M7.8 11.2c.3-.3.8-.3 1.1 0 .3.3.3.8 0 1.1l-2.4 2.4h8.8c2.8 0 5.1-2.3 5.1-5.2 0-2.9-2.3-5.2-5.1-5.2H8.6c-.4 0-.8-.3-.8-.8 0-.4.4-.8.8-.8h6.7c3.7 0 6.7 3 6.7 6.8 0 3.7-3 6.7-6.7 6.7H6.5l2.4 2.4c.3.3.3.8 0 1.1-.2.2-.4.2-.6.2s-.4-.1-.6-.2L3.2 14c-.3-.3-.3-.8 0-1.1l4.5-4.6z" fill="currentColor"/></svg>
            Returns
          </div>
          <span class="accordion-icon">&#9660;</span>
        </div>
        <div class="accordion-content">
          <div class="accordion-body">
            <h3>Easy 30-Day Returns</h3>
            <p><strong>Not in love? No problem.</strong></p>
            <ul>
              <li>30-day return window from delivery date</li>
              <li>Items must be unworn, unwashed, with tags attached</li>
              <li>Free returns on all US orders</li>
              <li>Refunds processed within 5-7 business days</li>
            </ul>
            <p><strong>Exchanges:</strong> Want a different size? We'll ship your exchange for free!</p>
          </div>
        </div>
      </div>

      <div class="accordion" onclick="toggleAccordion(this)">
        <div class="accordion-header">
          <div class="accordion-title">
            <svg viewBox="0 0 24 24" fill="none"><path d="M12.1 21.8c-.2 0-.4-.1-.6-.2-1.8-1.4-3.5-2.8-4.9-4.1C4.3 15.4 2.5 13.4 2.5 10.5c0-3.2 2.3-5.3 5.2-5.3 1.7 0 3.2.9 4.3 2.3 1.1-1.4 2.6-2.3 4.3-2.3 2.9 0 5.2 2.1 5.2 5.3 0 2.9-1.8 4.9-4.1 7-1.4 1.3-3.1 2.7-4.9 4.1-.2.1-.4.2-.6.2z" fill="currentColor"/></svg>
            Care Instructions
          </div>
          <span class="accordion-icon">&#9660;</span>
        </div>
        <div class="accordion-content">
          <div class="accordion-body">
            <h3>Keep Your Jeans Looking Fresh</h3>
            <ul>
              <li><strong>Turn inside out</strong> before washing to preserve color</li>
              <li><strong>Machine wash cold</strong> with like colors</li>
              <li><strong>Use mild detergent</strong> - skip the bleach</li>
              <li><strong>Hang dry</strong> for best results (prevents shrinking)</li>
              <li><strong>Wash sparingly</strong> - every 4-5 wears maintains shape</li>
            </ul>
            <p><strong>Pro Tip:</strong> Freeze jeans overnight to refresh between washes!</p>
          </div>
        </div>
      </div>
    </div>

    <!-- Why Choose Section -->
    <div class="fade-in" style="padding:60px 20px;background:var(--brand-secondary);max-width:100%">
      <div style="max-width:1200px;margin:0 auto">
        <h2 style="text-align:center;font-size:28px;font-weight:700;margin-bottom:40px;color:var(--brand-dark)">Why Everyone's Obsessed</h2>
        <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(min(100%,250px),1fr));gap:20px">
          ${[
            { icon: '', title: 'Y2K Perfection', desc: 'Authentic low-rise fit that sits perfectly on your hips' },
            { icon: '', title: 'Premium Quality', desc: 'Thick denim that holds its shape wash after wash' },
            { icon: '', title: 'TikTok Approved', desc: 'The jeans everyone is asking about on their FYP' }
          ].map(f => `
            <div style="text-align:center;padding:30px;background:#fff;border-radius:var(--radius-lg)">
              <div style="font-size:48px;margin-bottom:20px">${f.icon}</div>
              <h3 style="margin-bottom:15px;font-weight:600;color:var(--brand-dark)">${f.title}</h3>
              <p style="color:#666;font-size:14px;line-height:1.6">${f.desc}</p>
            </div>
          `).join('')}
        </div>
      </div>
    </div>

    <!-- Testimonials Section -->
    <div class="fade-in" style="padding:60px 20px;background:var(--brand-light)">
      <div style="max-width:1200px;margin:0 auto">
        <h2 style="text-align:center;font-size:28px;font-weight:700;margin-bottom:16px;color:var(--brand-dark)">Real Reviews</h2>
        <p style="text-align:center;color:#666;margin-bottom:40px">See what people are saying about these jeans</p>

        <div id="testimonialGrid" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(min(100%,350px),1fr));gap:24px">
          ${renderTestimonials(10)}
        </div>

        <div style="text-align:center;margin-top:40px">
          <button id="loadMoreBtn" onclick="loadMoreReviews()" style="background:var(--brand-primary);color:#fff;border:none;padding:16px 40px;border-radius:var(--radius-md);font-weight:600;cursor:pointer;transition:all 0.2s;min-height:44px">
            Load More Reviews
          </button>
        </div>
      </div>
    </div>

    <!-- Final CTA -->
    <div class="fade-in" style="padding:80px 20px;text-align:center;background:linear-gradient(135deg,var(--brand-primary) 0%,#7FAEC0 100%);color:#fff">
      <h2 style="font-size:clamp(28px,5vw,40px);font-weight:700;margin-bottom:16px">Don't Miss Out</h2>
      <p style="font-size:18px;opacity:0.9;margin-bottom:30px;max-width:500px;margin-left:auto;margin-right:auto">These jeans sold out 3x already. Get yours before they're gone again.</p>
      <button onclick="document.querySelector('.product-hero').scrollIntoView({behavior:'smooth'})" style="background:#fff;color:var(--brand-primary);border:none;padding:18px 50px;border-radius:var(--radius-md);font-size:18px;font-weight:700;cursor:pointer;transition:all 0.2s;min-height:56px">
        Get Yours Now
      </button>
    </div>
  `;

  // Animate elements
  requestAnimationFrame(() => {
    document.querySelectorAll('.fade-in').forEach((el, i) => {
      setTimeout(() => el.classList.add('visible'), i * 100);
    });
  });
}

function toggleAccordion(accordion) {
  accordion.classList.toggle('open');
}

function renderTestimonials(count) {
  return testimonials.slice(0, count).map(t => `
    <div class="testimonial-card">
      <div class="testimonial-header">
        <img src="./images/testimonials/testimonial-${String(t.img).padStart(2, '0')}.jpeg" alt="${t.name}" class="testimonial-avatar" loading="lazy">
        <div class="testimonial-info">
          <div class="testimonial-name">${t.name}</div>
          <div class="testimonial-platform" style="color:${platformColors[t.platform]}">
            ${platformSVGs[t.platform]}
            <span>Verified on ${t.platform.charAt(0).toUpperCase() + t.platform.slice(1)}</span>
          </div>
        </div>
        <div class="testimonial-stars">${'★'.repeat(t.rating)}${'☆'.repeat(5-t.rating)}</div>
      </div>
      <p class="testimonial-text">${t.text}</p>
      <div class="testimonial-date">${t.date}</div>
    </div>
  `).join('');
}

let reviewsLoaded = 10;
function loadMoreReviews() {
  const grid = document.getElementById('testimonialGrid');
  const remaining = testimonials.slice(reviewsLoaded);

  remaining.forEach((t, i) => {
    const card = document.createElement('div');
    card.className = 'testimonial-card';
    card.style.opacity = '0';
    card.style.transform = 'translateY(20px)';
    card.innerHTML = `
      <div class="testimonial-header">
        <img src="./images/testimonials/testimonial-${String(t.img).padStart(2, '0')}.jpeg" alt="${t.name}" class="testimonial-avatar" loading="lazy">
        <div class="testimonial-info">
          <div class="testimonial-name">${t.name}</div>
          <div class="testimonial-platform" style="color:${platformColors[t.platform]}">
            ${platformSVGs[t.platform]}
            <span>Verified on ${t.platform.charAt(0).toUpperCase() + t.platform.slice(1)}</span>
          </div>
        </div>
        <div class="testimonial-stars">${'★'.repeat(t.rating)}${'☆'.repeat(5-t.rating)}</div>
      </div>
      <p class="testimonial-text">${t.text}</p>
      <div class="testimonial-date">${t.date}</div>
    `;
    grid.appendChild(card);

    setTimeout(() => {
      card.style.transition = 'all 0.4s ease';
      card.style.opacity = '1';
      card.style.transform = 'translateY(0)';
    }, i * 50);
  });

  reviewsLoaded = testimonials.length;
  document.getElementById('loadMoreBtn').style.display = 'none';
}

// Initialize on load
window.addEventListener('load', () => {
  perfMetrics.mark('window-loaded');
  console.log('Performance Metrics:', perfMetrics.marks);

  // Register Service Worker for caching
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('/sw.js')
      .then(reg => console.log('SW registered:', reg.scope))
      .catch(err => console.log('SW registration skipped'));
  }
});
</script>

</body>
</html>
